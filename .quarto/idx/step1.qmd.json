{"title":"Details for the itembank structure","markdown":{"yaml":{},"headingText":"Details for the itembank structure","containsRefs":false,"markdown":"\n\n```{=html}\n<script>\n function postFiles() {\n   \n  const key = document.getElementById(\"key\").value;\n  const catName = document.getElementById(\"catName\").value;\n  const url = \"https://qualcat.duckdns.org/api/v0/upload\";\n\n  const itemBank = document.getElementById(\"itemBankInput\").files[0];\n  \n  if (!key || !catName || !itemBank) {\n  alert(\"Please fill in all required fields: Personal Key, CAT Name, and Item Bank file.\");\n  return; // stop further execution\n}\n  //const rawData = document.getElementById(\"rawDataInput\").files[0];\n  //console.log(catName)\n  const formData = new FormData();\n  if (itemBank) formData.append(\"file\", itemBank);\n  //if (rawData) formData.append(\"rawData\", rawData);\n  \n  fetch(url, {\n    method: 'POST',\n    headers: { \"x-api-key\": key,\n              \"catName\": catName \n    },\n    body: formData\n  })\n  .then(async response => {\n    if (!response.ok) {\n      const errMsg = await response.text();\n      throw new Error(`HTTP ${response.status}: ${errMsg}`);\n    }\n    return response.json();\n  })\n  .then(data => alert(\"Files uploaded successfully!\"))\n  .catch(err => alert(\"Error: \" + err));\n}\n\n</script>\n```\nOnce you have filled in the actual data in the itembank, you can use the field below to upload your itembank to the server.\n\n```{=html}\n<div style=\"\n  background-color: rgba(24, 188, 156, 0.1);  /* #18bc9c with 20% opacity */\n  border: 1px solid #18bc9c;\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n\">\n  <div class=\"d-flex flex-column\" style=\"gap: 12px; max-width: 400px;\">\n    <div>\n      <label for=\"formFile\" class=\"form-label mt-2\">Select Itembank File (.csv format)</label>\n      <input class=\"form-control\" type=\"file\" id=\"itemBankInput\" accept=\".csv\"> \n    </div>\n\n    <!--<legend class=\"mt-2\"></legend>\n    <div class=\"form-check form-switch\">\n      <input class=\"form-check-input\" type=\"checkbox\" id=\"rawDataToggle\" onchange=\"toggleRawDataInput()\">\n      <label class=\"form-check-label\" for=\"rawDataToggle\">Raw data available</label>\n    </div>\n\n    <div id=\"rawDataContainer\" style=\"display: none;\">\n      <label for=\"rawDataInput\" class=\"form-label mt-4\">Select Raw Data File</label>\n      <input class=\"form-control\" type=\"file\" id=\"rawDataInput\" accept=\".Rdata\"> \n    </div>\n\n    <div class=\"form-floating mt-2\">\n      <input type=\"password\" class=\"form-control\" id=\"key\" placeholder=\"Personal Key\" autocomplete=\"off\">\n      <label for=\"key\">Personal Key</label>\n    </div> -->\n\n    <button class=\"btn btn-outline-success mt-2\" onclick=\"postFiles()\">\n      Submit File\n    </button>\n  </div>\n</div>\n```\n```{=html}\n<!--<script>\n  function toggleRawDataInput() {\n    const checkbox = document.getElementById(\"rawDataToggle\");\n    const rawDataContainer = document.getElementById(\"rawDataContainer\");\n    rawDataContainer.style.display = checkbox.checked ? \"block\" : \"none\";\n  }\n</script>-->\n```\nFor the purpose of this tutorial, you can use the `R` code below to create an itembank with polytomous items, or use `MS Excel` with [**this file**](https://osf.io/ymh3d/files/sk9hx) for an English-Dutch vocabulary test, which includes 36 dichotomous items.\n\n::: {.panel-tabset group=\"language\"}\n\nThe item bank must be a `.csv` (Comma-Separated Values) file, with specific column names and structure. The number of rows should correspond to the number of available items.\n\n-   One column must contain the item labels, labelled `ItemLabel`.\n\n-   A second column must contain the item texts, labelled `Item`.\n\n-   Subsequent columns must contain the response options, labeled `Choice1`, `Choice2`, and so on, up to the number of available choices.\\\n    **Note:** In this version, all items must have the same number of response options.\n\n-   One column labelled `Scores` must contain the item scores. A possible format for a dichotomous item with 4 response options could be `0100` indicating that the second response option is scored as 1 (e.g., correct answer). For polytomous items the scores should range from `0` up to the total number o categories minus 1, e.g., `0123` for 4 response options.\n\n-   Subsequent columns started with the letter `a` correspond to the IRT discrimination (slope) parameters.\\\n    For a unidimensional structure, there is only one parameter, labelled `a1.`\\\n    For multidimensional structures, `a1` corresponds to the first factor, `a2` to the second factor, and so on.\n\n-   Similarly, columns started with the letter `d` correspond to the IRT difficulty (location or intercept) parameters.\\\n    For a unidimensional structure, there is only one parameter, labelled `d.`\\\n    For multidimensional structures, `d1` corresponds to the first threshold, `d2` to the second threshold, and so on, up to the number of available thresholds.\n\n## Example itembank in `R`\n\nIn this example we create an itembank for the PHQ-9 questionnaire. The PHQ-9 consists of nine items measuring depression symptoms with four ordered response options. The items have been calibrated using publicly available data with a Graded Response Model.\n\n```{r, eval = FALSE, echo = TRUE}\nwd <- '[PATH TO YOUR WORKING DIRECTORY]' # replace this with your working directory\n# read the blueprint item bank:\nitem_bank <- read.csv(file.path(wd, \"itembank_blueprint.csv\"), colClasses = c(Scores = \"character\"))\n\n# We fill in the columns manually columnwise:\nitem_bank$ItemLabel <- c(\"DPQ010\", \"DPQ020\", \"DPQ030\", \"DPQ040\", \"DPQ050\", \"DPQ060\", \"DPQ070\", \"DPQ080\", \"DPQ090\")\nitem_bank$Item <- c(\n  \"Over the last 2 weeks, how often have you been bothered by little interest or pleasure in doing things\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling down, depressed, or hopeless\",\n  \"Over the last 2 weeks, how often have you been bothered by trouble falling or staying asleep, or sleeping too much\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling tired or having little energy\",\n  \"Over the last 2 weeks, how often have you been bothered by poor appetite or overeating\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling bad about yourself or that you are a failure or have let yourself or your family down\",\n  \"Over the last 2 weeks, how often have you been bothered by trouble concentrating on things, such as reading the newspaper or watching television\",\n  \"Over the last 2 weeks, how often have you been bothered by moving or speaking so slowly that other people could have noticed. Or the opposite being so figety or restless that you have been moving around a lot more than usual\",\n  \"Over the last 2 weeks, how often have you been bothered by thoughts that you would be better off dead, or of hurting yourself\"\n)\n\n# In this example all questions have the same answer options\nanswer_options <- c(\"Not at all\", \"Several days\", \"More than half the days\", \"Nearly every day\")\n# We assign this options to the correct columns\nitem_bank[, 3:6] <- t(apply(item_bank[, 3:6], 1, function(x) answer_options))\n\n# adding discrimination parameter values manually\nitem_bank$a1 <- c(2.424091, 3.122244, 1.632741, 1.974066,\n                  1.880244, 2.759441, 2.202966, 2.103382,\n                  2.303624)\n# adding location/difficulty parameter values manually\n# Note: for a \"graded\" model should be ordered within each item\nitem_bank$d1 <- c(2.08369022, -2.48929807, -0.70986867, -0.07750205,\n                  -1.77299047, -3.06577563, -2.62351599, -3.37522945,\n                  -5.17894765)\nitem_bank$d2 <- c(-4.309610, -5.251526, -2.414099, -2.630950,\n                  -3.472991, -5.215560, -4.455207, -4.905570,\n                  -6.706078)\nitem_bank$d3 <- c(-5.602148, -6.673016, -3.288573, -3.694516,\n                  -4.441030, -6.354125, -5.359964, -5.962049,\n                  -7.498389)\n# save the item bank\nwrite.csv(item_bank, file.path(wd, \"itembank.csv\"), row.names = FALSE, quote = TRUE)\n# END\n```\n\n## Example itembank in `Excel`\n\n-   Generate a unidimensional itembank blueprint for 36 dichotomous items with four response options each.\n\n-   Open Microsoft Excel.\n\n-   Select the first column and go to **Data** tab — (**Split) Text to Columns.**\n\n![](images/Screenshot 2025-12-19 at 11.19.46.png)\n\n-   Then select **Comma** delimiter and click **Apply** (or **Finish**).\n\n![](images/Screenshot 2025-12-19 at 11.20.12.png){width=\"800\"}\n\n-   Enter the data of your itembank in all columns manually.\n\n-   Click **File — Save As...** and save the itembank as **.csv** file.\n\nThe final item bank of the English-Dutch vocabulary test can be found [here](https://osf.io/ymh3d/files/sk9hx).\n:::\n\n::: {.panel-tabset group=\"language\"}\n:::\n","srcMarkdownNoYaml":"\n\n```{=html}\n<script>\n function postFiles() {\n   \n  const key = document.getElementById(\"key\").value;\n  const catName = document.getElementById(\"catName\").value;\n  const url = \"https://qualcat.duckdns.org/api/v0/upload\";\n\n  const itemBank = document.getElementById(\"itemBankInput\").files[0];\n  \n  if (!key || !catName || !itemBank) {\n  alert(\"Please fill in all required fields: Personal Key, CAT Name, and Item Bank file.\");\n  return; // stop further execution\n}\n  //const rawData = document.getElementById(\"rawDataInput\").files[0];\n  //console.log(catName)\n  const formData = new FormData();\n  if (itemBank) formData.append(\"file\", itemBank);\n  //if (rawData) formData.append(\"rawData\", rawData);\n  \n  fetch(url, {\n    method: 'POST',\n    headers: { \"x-api-key\": key,\n              \"catName\": catName \n    },\n    body: formData\n  })\n  .then(async response => {\n    if (!response.ok) {\n      const errMsg = await response.text();\n      throw new Error(`HTTP ${response.status}: ${errMsg}`);\n    }\n    return response.json();\n  })\n  .then(data => alert(\"Files uploaded successfully!\"))\n  .catch(err => alert(\"Error: \" + err));\n}\n\n</script>\n```\nOnce you have filled in the actual data in the itembank, you can use the field below to upload your itembank to the server.\n\n```{=html}\n<div style=\"\n  background-color: rgba(24, 188, 156, 0.1);  /* #18bc9c with 20% opacity */\n  border: 1px solid #18bc9c;\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n\">\n  <div class=\"d-flex flex-column\" style=\"gap: 12px; max-width: 400px;\">\n    <div>\n      <label for=\"formFile\" class=\"form-label mt-2\">Select Itembank File (.csv format)</label>\n      <input class=\"form-control\" type=\"file\" id=\"itemBankInput\" accept=\".csv\"> \n    </div>\n\n    <!--<legend class=\"mt-2\"></legend>\n    <div class=\"form-check form-switch\">\n      <input class=\"form-check-input\" type=\"checkbox\" id=\"rawDataToggle\" onchange=\"toggleRawDataInput()\">\n      <label class=\"form-check-label\" for=\"rawDataToggle\">Raw data available</label>\n    </div>\n\n    <div id=\"rawDataContainer\" style=\"display: none;\">\n      <label for=\"rawDataInput\" class=\"form-label mt-4\">Select Raw Data File</label>\n      <input class=\"form-control\" type=\"file\" id=\"rawDataInput\" accept=\".Rdata\"> \n    </div>\n\n    <div class=\"form-floating mt-2\">\n      <input type=\"password\" class=\"form-control\" id=\"key\" placeholder=\"Personal Key\" autocomplete=\"off\">\n      <label for=\"key\">Personal Key</label>\n    </div> -->\n\n    <button class=\"btn btn-outline-success mt-2\" onclick=\"postFiles()\">\n      Submit File\n    </button>\n  </div>\n</div>\n```\n```{=html}\n<!--<script>\n  function toggleRawDataInput() {\n    const checkbox = document.getElementById(\"rawDataToggle\");\n    const rawDataContainer = document.getElementById(\"rawDataContainer\");\n    rawDataContainer.style.display = checkbox.checked ? \"block\" : \"none\";\n  }\n</script>-->\n```\nFor the purpose of this tutorial, you can use the `R` code below to create an itembank with polytomous items, or use `MS Excel` with [**this file**](https://osf.io/ymh3d/files/sk9hx) for an English-Dutch vocabulary test, which includes 36 dichotomous items.\n\n::: {.panel-tabset group=\"language\"}\n## Details for the itembank structure\n\nThe item bank must be a `.csv` (Comma-Separated Values) file, with specific column names and structure. The number of rows should correspond to the number of available items.\n\n-   One column must contain the item labels, labelled `ItemLabel`.\n\n-   A second column must contain the item texts, labelled `Item`.\n\n-   Subsequent columns must contain the response options, labeled `Choice1`, `Choice2`, and so on, up to the number of available choices.\\\n    **Note:** In this version, all items must have the same number of response options.\n\n-   One column labelled `Scores` must contain the item scores. A possible format for a dichotomous item with 4 response options could be `0100` indicating that the second response option is scored as 1 (e.g., correct answer). For polytomous items the scores should range from `0` up to the total number o categories minus 1, e.g., `0123` for 4 response options.\n\n-   Subsequent columns started with the letter `a` correspond to the IRT discrimination (slope) parameters.\\\n    For a unidimensional structure, there is only one parameter, labelled `a1.`\\\n    For multidimensional structures, `a1` corresponds to the first factor, `a2` to the second factor, and so on.\n\n-   Similarly, columns started with the letter `d` correspond to the IRT difficulty (location or intercept) parameters.\\\n    For a unidimensional structure, there is only one parameter, labelled `d.`\\\n    For multidimensional structures, `d1` corresponds to the first threshold, `d2` to the second threshold, and so on, up to the number of available thresholds.\n\n## Example itembank in `R`\n\nIn this example we create an itembank for the PHQ-9 questionnaire. The PHQ-9 consists of nine items measuring depression symptoms with four ordered response options. The items have been calibrated using publicly available data with a Graded Response Model.\n\n```{r, eval = FALSE, echo = TRUE}\nwd <- '[PATH TO YOUR WORKING DIRECTORY]' # replace this with your working directory\n# read the blueprint item bank:\nitem_bank <- read.csv(file.path(wd, \"itembank_blueprint.csv\"), colClasses = c(Scores = \"character\"))\n\n# We fill in the columns manually columnwise:\nitem_bank$ItemLabel <- c(\"DPQ010\", \"DPQ020\", \"DPQ030\", \"DPQ040\", \"DPQ050\", \"DPQ060\", \"DPQ070\", \"DPQ080\", \"DPQ090\")\nitem_bank$Item <- c(\n  \"Over the last 2 weeks, how often have you been bothered by little interest or pleasure in doing things\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling down, depressed, or hopeless\",\n  \"Over the last 2 weeks, how often have you been bothered by trouble falling or staying asleep, or sleeping too much\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling tired or having little energy\",\n  \"Over the last 2 weeks, how often have you been bothered by poor appetite or overeating\",\n  \"Over the last 2 weeks, how often have you been bothered by feeling bad about yourself or that you are a failure or have let yourself or your family down\",\n  \"Over the last 2 weeks, how often have you been bothered by trouble concentrating on things, such as reading the newspaper or watching television\",\n  \"Over the last 2 weeks, how often have you been bothered by moving or speaking so slowly that other people could have noticed. Or the opposite being so figety or restless that you have been moving around a lot more than usual\",\n  \"Over the last 2 weeks, how often have you been bothered by thoughts that you would be better off dead, or of hurting yourself\"\n)\n\n# In this example all questions have the same answer options\nanswer_options <- c(\"Not at all\", \"Several days\", \"More than half the days\", \"Nearly every day\")\n# We assign this options to the correct columns\nitem_bank[, 3:6] <- t(apply(item_bank[, 3:6], 1, function(x) answer_options))\n\n# adding discrimination parameter values manually\nitem_bank$a1 <- c(2.424091, 3.122244, 1.632741, 1.974066,\n                  1.880244, 2.759441, 2.202966, 2.103382,\n                  2.303624)\n# adding location/difficulty parameter values manually\n# Note: for a \"graded\" model should be ordered within each item\nitem_bank$d1 <- c(2.08369022, -2.48929807, -0.70986867, -0.07750205,\n                  -1.77299047, -3.06577563, -2.62351599, -3.37522945,\n                  -5.17894765)\nitem_bank$d2 <- c(-4.309610, -5.251526, -2.414099, -2.630950,\n                  -3.472991, -5.215560, -4.455207, -4.905570,\n                  -6.706078)\nitem_bank$d3 <- c(-5.602148, -6.673016, -3.288573, -3.694516,\n                  -4.441030, -6.354125, -5.359964, -5.962049,\n                  -7.498389)\n# save the item bank\nwrite.csv(item_bank, file.path(wd, \"itembank.csv\"), row.names = FALSE, quote = TRUE)\n# END\n```\n\n## Example itembank in `Excel`\n\n-   Generate a unidimensional itembank blueprint for 36 dichotomous items with four response options each.\n\n-   Open Microsoft Excel.\n\n-   Select the first column and go to **Data** tab — (**Split) Text to Columns.**\n\n![](images/Screenshot 2025-12-19 at 11.19.46.png)\n\n-   Then select **Comma** delimiter and click **Apply** (or **Finish**).\n\n![](images/Screenshot 2025-12-19 at 11.20.12.png){width=\"800\"}\n\n-   Enter the data of your itembank in all columns manually.\n\n-   Click **File — Save As...** and save the itembank as **.csv** file.\n\nThe final item bank of the English-Dutch vocabulary test can be found [here](https://osf.io/ymh3d/files/sk9hx).\n:::\n\n::: {.panel-tabset group=\"language\"}\n:::\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":"all","plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"step1.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.554","editor":"visual","server":{"port":8066},"theme":"flatly"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}